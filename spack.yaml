spack:
  view: ./view
  concretizer:
    unify: when_possible

  config:
    install_tree:
      root: ./opt/spack

  specs:
  # Toolchain
  - gcc@13.2.0

  # MPI stack
  - openmpi@5.0.7 %gcc@13.2.0

  # Core scientific stack (consistent MPI/HDF5/Python)
  - hdf5@1.14.5 +mpi ^openmpi@5.0.7 %gcc@13.2.0
  - python@3.11.8 %gcc@13.2.0
  - py-pip
  - py-setuptools
  - py-wheel
  - py-mpi4py ^openmpi@5.0.7
  - py-h5py@3.12.1 +mpi ^hdf5@1.14.5+mpi
  - py-bigmpi4py
  - py-dask
  - py-psutil
  - py-tqdm
  - py-pyyaml
  - py-numcodecs
  - py-gstools
  - py-zarr@:2
  - py-jupyter
  - py-matplotlib
  - py-pandas

  # ICESEE itself via Spack package (defined in icesee-spack repo)
  - py-icesee +mpi

  repos:
  - ./icesee-spack